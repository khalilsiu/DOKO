{"ast":null,"code":"import _slicedToArray from \"/Users/anthonysiu/doko/DOKO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/anthonysiu/doko/DOKO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/anthonysiu/doko/DOKO/client/src/modules/meta-profiles/ProfileItem.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { memo, useState, useEffect, useRef } from 'react';\nimport 'react-lazy-load-image-component/src/effects/opacity.css';\nimport { Grid, IconButton, Button, makeStyles, Typography, Menu, MenuItem } from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/MoreVert';\nimport { useHistory } from 'react-router-dom';\nimport { useCookies } from 'react-cookie';\nimport Address from './Address';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    card: _defineProperty({\n      border: '2px solid rgba(255, 255, 255, 0.5)',\n      boxSizing: 'border-box',\n      borderRadius: '15px',\n      aspectRatio: '1.08'\n    }, theme.breakpoints.down('sm'), {\n      aspectRatio: '1.28'\n    }),\n    options: {\n      width: 140,\n      '&:hover': {\n        background: theme.palette.primary.main,\n        color: 'white'\n      }\n    }\n  };\n});\nexport var ProfileItem = /*#__PURE__*/memo(_c = _s(function (_ref) {\n  _s();\n\n  var profile = _ref.profile,\n      onClickEdit = _ref.onClickEdit,\n      onClickDelete = _ref.onClickDelete;\n  var styles = useStyles();\n  var history = useHistory();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      anchorEl = _useState2[0],\n      setAnchorEl = _useState2[1];\n\n  var titleRef = useRef(null);\n\n  var _useState3 = useState(11),\n      _useState4 = _slicedToArray(_useState3, 2),\n      titleLength = _useState4[0],\n      setTitleLength = _useState4[1];\n\n  var _useCookies = useCookies(['profiles']),\n      _useCookies2 = _slicedToArray(_useCookies, 3),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1],\n      removeCookie = _useCookies2[2];\n\n  useEffect(function () {\n    function handleResize() {\n      var width = titleRef.current.clientWidth;\n\n      if (width < 270) {\n        setTitleLength(7);\n      } else if (width < 300) {\n        setTitleLength(8);\n      } else if (width < 360) {\n        setTitleLength(11);\n      } else if (width < 400) {\n        setTitleLength(13);\n      } else {\n        setTitleLength(15);\n      }\n    }\n\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return function () {\n      window.removeEventListener('resize', handleResize);\n    };\n  });\n\n  var shortenName = function shortenName(name) {\n    if (name.length > titleLength) {\n      return \"\".concat(name.substr(0, titleLength - 1), \"...\");\n    }\n\n    return name;\n  };\n\n  var handleClick = function handleClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handleClose = function handleClose(e) {\n    e.stopPropagation();\n    setAnchorEl(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    lg: 4,\n    style: {\n      minWidth: '25vw'\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      className: styles.card,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        direction: \"row\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        style: {\n          height: '20%',\n          paddingLeft: 19\n        },\n        ref: titleRef,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          style: {\n            fontWeight: 'bold',\n            fontSize: '20px',\n            lineHeight: '33px'\n          },\n          children: \"\".concat(shortenName(profile), \" (\").concat(cookies.profiles[profile].address.length, \")\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            className: \"gradient-button\",\n            variant: \"outlined\",\n            style: {\n              fontSize: 12,\n              lineHeight: '16px'\n            },\n            onClick: function onClick() {\n              history.push(\"/profiles/\".concat(cookies.profiles[profile].hash));\n            },\n            children: \"View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: handleClick,\n            children: /*#__PURE__*/_jsxDEV(MenuIcon, {\n              style: {\n                fill: '#FFFFFF'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Menu, {\n            anchorEl: anchorEl,\n            open: Boolean(anchorEl),\n            onClose: handleClose,\n            getContentAnchorEl: null,\n            anchorOrigin: {\n              vertical: 'bottom',\n              horizontal: 'center'\n            },\n            transformOrigin: {\n              vertical: 'top',\n              horizontal: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              className: styles.options,\n              onClick: function onClick(e) {\n                navigator.clipboard.writeText(\"https://doko.one/profiles/$\".concat(cookies.profiles[profile].hash));\n                handleClose(e);\n              },\n              children: \"Copy URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              className: styles.options,\n              onClick: function onClick(e) {\n                onClickEdit();\n                handleClose(e);\n              },\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(MenuItem, {\n              className: styles.options,\n              onClick: function onClick(e) {\n                onClickDelete();\n                handleClose(e);\n              },\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          border: 'none',\n          backgroundColor: 'rgba(255, 255, 255, 0.5)',\n          height: '1px',\n          width: '100%',\n          margin: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, _this), cookies.profiles[profile].address.length ? /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        direction: \"column\",\n        alignItems: \"center\",\n        style: {\n          height: '80%'\n        },\n        wrap: \"nowrap\",\n        children: cookies.profiles[profile].address.map(function (address) {\n          return /*#__PURE__*/_jsxDEV(Address, {\n            address: address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, _this) : /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        style: {\n          height: '80%'\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          style: {\n            fontFamily: 'Open Sans',\n            fontSize: '21px'\n          },\n          children: \"No addresses found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, _this);\n}, \"ePaON3sImIwUSjDE2zoryrgsWjc=\", false, function () {\n  return [useStyles, useHistory, useCookies];\n}));\n_c2 = ProfileItem;\nexport default ProfileItem;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ProfileItem$memo\");\n$RefreshReg$(_c2, \"ProfileItem\");","map":{"version":3,"sources":["/Users/anthonysiu/doko/DOKO/client/src/modules/meta-profiles/ProfileItem.tsx"],"names":["memo","useState","useEffect","useRef","Grid","IconButton","Button","makeStyles","Typography","Menu","MenuItem","MenuIcon","useHistory","useCookies","Address","useStyles","theme","card","border","boxSizing","borderRadius","aspectRatio","breakpoints","down","options","width","background","palette","primary","main","color","ProfileItem","profile","onClickEdit","onClickDelete","styles","history","anchorEl","setAnchorEl","titleRef","titleLength","setTitleLength","cookies","setCookie","removeCookie","handleResize","current","clientWidth","window","addEventListener","removeEventListener","shortenName","name","length","substr","handleClick","event","preventDefault","stopPropagation","currentTarget","handleClose","e","minWidth","height","paddingLeft","fontWeight","fontSize","lineHeight","profiles","address","push","hash","fill","Boolean","vertical","horizontal","navigator","clipboard","writeText","backgroundColor","margin","map","fontFamily"],"mappings":"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","sourcesContent":["import { memo, MouseEvent, SyntheticEvent, useState, useEffect, useRef } from 'react';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/opacity.css';\nimport {\n  Grid,\n  IconButton,\n  Button,\n  makeStyles,\n  Typography,\n  Menu,\n  MenuItem,\n} from '@material-ui/core';\nimport MenuIcon from '@material-ui/icons/MoreVert';\nimport { useHistory } from 'react-router-dom';\nimport { useCookies } from 'react-cookie';\n\nimport Address from './Address';\n\ninterface ProfileItemProps {\n  profile: any;\n  onClickEdit: any;\n  onClickDelete: any;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  card: {\n    border: '2px solid rgba(255, 255, 255, 0.5)',\n    boxSizing: 'border-box',\n    borderRadius: '15px',\n    aspectRatio: '1.08',\n    [theme.breakpoints.down('sm')]: {\n      aspectRatio: '1.28',\n    },\n  },\n  options: {\n    width: 140,\n    '&:hover': {\n      background: theme.palette.primary.main,\n      color: 'white',\n    },\n  },\n}));\n\nexport const ProfileItem = memo(({ profile, onClickEdit, onClickDelete }: ProfileItemProps) => {\n  const styles = useStyles();\n  const history = useHistory();\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null);\n  const titleRef = useRef<any>(null);\n\n  const [titleLength, setTitleLength] = useState(11);\n  const [cookies, setCookie, removeCookie] = useCookies(['profiles']);\n\n  useEffect(() => {\n    function handleResize() {\n      const width = titleRef.current.clientWidth;\n      if (width < 270) {\n        setTitleLength(7);\n      } else if (width < 300) {\n        setTitleLength(8);\n      } else if (width < 360) {\n        setTitleLength(11);\n      } else if (width < 400) {\n        setTitleLength(13);\n      } else {\n        setTitleLength(15);\n      }\n    }\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  });\n\n  const shortenName = (name: string) => {\n    if (name.length > titleLength) {\n      return `${name.substr(0, titleLength - 1)}...`;\n    }\n    return name;\n  };\n\n  const handleClick = (event: MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = (e: SyntheticEvent) => {\n    e.stopPropagation();\n    setAnchorEl(null);\n  };\n\n  return (\n    <Grid item xs={12} sm={6} lg={4} style={{ minWidth: '25vw' }}>\n      <Grid className={styles.card}>\n        <Grid\n          container\n          direction=\"row\"\n          justifyContent=\"space-between\"\n          alignItems=\"center\"\n          style={{ height: '20%', paddingLeft: 19 }}\n          ref={titleRef}\n        >\n          <Typography\n            variant=\"h5\"\n            style={{ fontWeight: 'bold', fontSize: '20px', lineHeight: '33px' }}\n          >\n            {`${shortenName(profile)} (${cookies.profiles[profile].address.length})`}\n          </Typography>\n          <div>\n            <Button\n              className=\"gradient-button\"\n              variant=\"outlined\"\n              style={{ fontSize: 12, lineHeight: '16px' }}\n              onClick={() => {\n                history.push(`/profiles/${cookies.profiles[profile].hash}`);\n              }}\n            >\n              View\n            </Button>\n            <IconButton onClick={handleClick}>\n              <MenuIcon style={{ fill: '#FFFFFF' }} />\n            </IconButton>\n            <Menu\n              anchorEl={anchorEl}\n              open={Boolean(anchorEl)}\n              onClose={handleClose}\n              getContentAnchorEl={null}\n              anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n              transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n            >\n              <MenuItem\n                className={styles.options}\n                onClick={(e) => {\n                  navigator.clipboard.writeText(\n                    `https://doko.one/profiles/$${cookies.profiles[profile].hash}`,\n                  );\n                  handleClose(e);\n                }}\n              >\n                Copy URL\n              </MenuItem>\n              <MenuItem\n                className={styles.options}\n                onClick={(e) => {\n                  onClickEdit();\n                  handleClose(e);\n                }}\n              >\n                Edit\n              </MenuItem>\n              <MenuItem\n                className={styles.options}\n                onClick={(e) => {\n                  onClickDelete();\n                  handleClose(e);\n                }}\n              >\n                Delete\n              </MenuItem>\n            </Menu>\n          </div>\n        </Grid>\n        <hr\n          style={{\n            border: 'none',\n            backgroundColor: 'rgba(255, 255, 255, 0.5)',\n            height: '1px',\n            width: '100%',\n            margin: 0,\n          }}\n        />\n\n        {cookies.profiles[profile].address.length ? (\n          <Grid\n            container\n            direction=\"column\"\n            alignItems=\"center\"\n            style={{ height: '80%' }}\n            wrap=\"nowrap\"\n          >\n            {cookies.profiles[profile].address.map((address: any) => (\n              <Address address={address} />\n            ))}\n          </Grid>\n        ) : (\n          <Grid container alignItems=\"center\" justifyContent=\"center\" style={{ height: '80%' }}>\n            <Typography style={{ fontFamily: 'Open Sans', fontSize: '21px' }}>\n              No addresses found\n            </Typography>\n          </Grid>\n        )}\n      </Grid>\n    </Grid>\n  );\n});\n\nexport default ProfileItem;\n"]},"metadata":{},"sourceType":"module"}