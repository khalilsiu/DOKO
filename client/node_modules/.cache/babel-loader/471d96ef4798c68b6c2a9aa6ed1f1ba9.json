{"ast":null,"code":"import _toConsumableArray from \"/Users/anthonysiu/doko/DOKO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/anthonysiu/doko/DOKO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport { useEffect, useMemo, useState, useRef, useCallback } from 'react';\nimport groupOptions from './lib/groupOptions';\nimport getOptions from './lib/getOptions';\nimport getDisplayValue from './lib/getDisplayValue';\nimport useFetch from './useFetch';\nimport getValues from './lib/getValues';\nimport useHighlight from './useHighlight';\nexport default function useSelect(_ref) {\n  var _ref$value = _ref.value,\n      defaultValue = _ref$value === void 0 ? null : _ref$value,\n      _ref$options = _ref.options,\n      defaultOptions = _ref$options === void 0 ? [] : _ref$options,\n      _ref$search = _ref.search,\n      canSearch = _ref$search === void 0 ? false : _ref$search,\n      _ref$multiple = _ref.multiple,\n      multiple = _ref$multiple === void 0 ? false : _ref$multiple,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$closeOnSelect = _ref.closeOnSelect,\n      closeOnSelect = _ref$closeOnSelect === void 0 ? true : _ref$closeOnSelect,\n      _ref$getOptions = _ref.getOptions,\n      getOptionsFn = _ref$getOptions === void 0 ? null : _ref$getOptions,\n      _ref$filterOptions = _ref.filterOptions,\n      filterOptions = _ref$filterOptions === void 0 ? null : _ref$filterOptions,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,\n      _ref$onFocus = _ref.onFocus,\n      onFocus = _ref$onFocus === void 0 ? function () {} : _ref$onFocus,\n      _ref$onBlur = _ref.onBlur,\n      onBlur = _ref$onBlur === void 0 ? function () {} : _ref$onBlur,\n      _ref$debounce = _ref.debounce,\n      debounce = _ref$debounce === void 0 ? 0 : _ref$debounce;\n  var ref = useRef(null);\n  var valueRef = useRef(undefined);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      focus = _useState6[0],\n      setFocus = _useState6[1];\n\n  var _useFetch = useFetch(search, defaultOptions, {\n    getOptions: getOptionsFn,\n    filterOptions: filterOptions,\n    debounceTime: debounce\n  }),\n      options = _useFetch.options,\n      fetching = _useFetch.fetching;\n\n  var onSelect = useCallback(function (newValue) {\n    var newOption = getOptions(newValue, value, Array.isArray(value) ? [].concat(_toConsumableArray(value), _toConsumableArray(options)) : options, multiple);\n    setValue(newOption);\n    onChange(getValues(newOption), newOption);\n\n    if (closeOnSelect) {\n      ref.current.blur();\n    }\n  }, [closeOnSelect, multiple, onChange, value, options]);\n\n  var _useHighlight = useHighlight(-1, options, onSelect, ref),\n      _useHighlight2 = _slicedToArray(_useHighlight, 2),\n      highlighted = _useHighlight2[0],\n      keyboardEvents = _useHighlight2[1];\n\n  var snapshot = useMemo(function () {\n    return {\n      options: groupOptions(options),\n      option: value,\n      displayValue: getDisplayValue(value),\n      value: getValues(value),\n      search: search,\n      fetching: fetching,\n      focus: focus,\n      highlighted: highlighted,\n      disabled: disabled\n    };\n  }, [disabled, fetching, focus, highlighted, search, value, options]);\n  var onMouseDown = useCallback(function (e) {\n    e.preventDefault();\n    onSelect(e.currentTarget.value);\n  }, [onSelect]);\n  var onFocusCb = useCallback(function (e) {\n    setFocus(true);\n    onFocus(e);\n  }, [onFocus]);\n  var onBlurCb = useCallback(function (e) {\n    setFocus(false);\n    setSearch('');\n    onBlur(e);\n  }, [onBlur]);\n  var valueProps = useMemo(function () {\n    return _extends({\n      tabIndex: '0',\n      readOnly: !canSearch\n    }, keyboardEvents, {\n      onFocus: onFocusCb,\n      onBlur: onBlurCb,\n      onChange: canSearch ? function (_ref2) {\n        var target = _ref2.target;\n        return setSearch(target.value);\n      } : null,\n      disabled: disabled,\n      ref: ref\n    });\n  }, [canSearch, keyboardEvents, onFocusCb, onBlurCb, disabled]);\n  var optionProps = useMemo(function () {\n    return {\n      tabIndex: '-1',\n      onMouseDown: onMouseDown\n    };\n  }, [onMouseDown]);\n  useEffect(function () {\n    if (valueRef.current === defaultValue) {\n      return;\n    }\n\n    valueRef.current = defaultValue;\n    setValue(getOptions(defaultValue, null, options, multiple));\n  }, [defaultValue, multiple, options]);\n  return [snapshot, valueProps, optionProps, setValue];\n}","map":{"version":3,"sources":["/Users/anthonysiu/doko/DOKO/client/node_modules/react-select-search/dist/esm/useSelect.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","useEffect","useMemo","useState","useRef","useCallback","groupOptions","getOptions","getDisplayValue","useFetch","getValues","useHighlight","useSelect","value","defaultValue","options","defaultOptions","search","canSearch","multiple","disabled","closeOnSelect","getOptionsFn","filterOptions","onChange","onFocus","onBlur","debounce","ref","valueRef","undefined","setValue","setSearch","focus","setFocus","debounceTime","fetching","onSelect","newValue","newOption","Array","isArray","current","blur","highlighted","keyboardEvents","snapshot","option","displayValue","onMouseDown","e","preventDefault","currentTarget","onFocusCb","onBlurCb","valueProps","tabIndex","readOnly","optionProps"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { useEffect, useMemo, useState, useRef, useCallback } from 'react';\nimport groupOptions from './lib/groupOptions';\nimport getOptions from './lib/getOptions';\nimport getDisplayValue from './lib/getDisplayValue';\nimport useFetch from './useFetch';\nimport getValues from './lib/getValues';\nimport useHighlight from './useHighlight';\nexport default function useSelect({\n  value: defaultValue = null,\n  options: defaultOptions = [],\n  search: canSearch = false,\n  multiple = false,\n  disabled = false,\n  closeOnSelect = true,\n  getOptions: getOptionsFn = null,\n  filterOptions = null,\n  onChange = () => {},\n  onFocus = () => {},\n  onBlur = () => {},\n  debounce = 0\n}) {\n  const ref = useRef(null);\n  const valueRef = useRef(undefined);\n  const [value, setValue] = useState(null);\n  const [search, setSearch] = useState('');\n  const [focus, setFocus] = useState(false);\n  const {\n    options,\n    fetching\n  } = useFetch(search, defaultOptions, {\n    getOptions: getOptionsFn,\n    filterOptions,\n    debounceTime: debounce\n  });\n  const onSelect = useCallback(newValue => {\n    const newOption = getOptions(newValue, value, Array.isArray(value) ? [...value, ...options] : options, multiple);\n    setValue(newOption);\n    onChange(getValues(newOption), newOption);\n\n    if (closeOnSelect) {\n      ref.current.blur();\n    }\n  }, [closeOnSelect, multiple, onChange, value, options]);\n  const [highlighted, keyboardEvents] = useHighlight(-1, options, onSelect, ref);\n  const snapshot = useMemo(() => ({\n    options: groupOptions(options),\n    option: value,\n    displayValue: getDisplayValue(value),\n    value: getValues(value),\n    search,\n    fetching,\n    focus,\n    highlighted,\n    disabled\n  }), [disabled, fetching, focus, highlighted, search, value, options]);\n  const onMouseDown = useCallback(e => {\n    e.preventDefault();\n    onSelect(e.currentTarget.value);\n  }, [onSelect]);\n  const onFocusCb = useCallback(e => {\n    setFocus(true);\n    onFocus(e);\n  }, [onFocus]);\n  const onBlurCb = useCallback(e => {\n    setFocus(false);\n    setSearch('');\n    onBlur(e);\n  }, [onBlur]);\n  const valueProps = useMemo(() => _extends({\n    tabIndex: '0',\n    readOnly: !canSearch\n  }, keyboardEvents, {\n    onFocus: onFocusCb,\n    onBlur: onBlurCb,\n    onChange: canSearch ? ({\n      target\n    }) => setSearch(target.value) : null,\n    disabled,\n    ref\n  }), [canSearch, keyboardEvents, onFocusCb, onBlurCb, disabled]);\n  const optionProps = useMemo(() => ({\n    tabIndex: '-1',\n    onMouseDown\n  }), [onMouseDown]);\n  useEffect(() => {\n    if (valueRef.current === defaultValue) {\n      return;\n    }\n\n    valueRef.current = defaultValue;\n    setValue(getOptions(defaultValue, null, options, multiple));\n  }, [defaultValue, multiple, options]);\n  return [snapshot, valueProps, optionProps, setValue];\n}"]},"metadata":{},"sourceType":"module"}